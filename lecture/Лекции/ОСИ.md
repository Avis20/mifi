

3. Режим реального времени

В этом режиме Выч сис. Реагирует в некоторый момент времени реагирует на события которые называются прерывания.
И для каждого такого события, после обработки выдает соответствующие результаты

Характерен в контуре с ОУ, время реакции

Время имеет различный порядок.

# По технолигии разработки и способу распространения, различают
* ПО с открытым кодом, свободно т.е. 
* ПО с закрытым кодом, на основе плятных лиензий 

Для некоторых существует как платные так и бесплатные ОС

## Типичный состав ОС

1. Обработчики прерываний и супервизоры 
2. Планировщики 
3. Система упрвелния процессами и ресурсами
4. Программы управления основной памятью
5. Программы упраления виртуальной памятью
6. Файловая система
7. Оболочки
8. Система генерации


## Слои стек структур современных ОС

Эдсшерд Дейсктстра 1960г. "THE"

## Ядро ОС

Ядро - это комплекс небольших программ, постоянно присутствующих в оперативной памяти (резидент) и выполняющии

* обработка прерываний
* Создание и уничтожение процессов
* Переключение процессов из одного сотояния в другое
* Диспетчирование процессов
* Приостановка и преотиризация процессов
* Синхронизация процессов
* Поддержка операции ввода, вывода
* Поддержка распределения и перераспределения основной памяти
* Поддержка файловой системы
* Обслуживание аппаратного контроля

В ядро включают те программы которые часто испльзуются, не требуют динамической настройки и обеспечивают быструю реакцию системы на различные события в аппаратуре. Это супервизорные программы и обработчики прерываний.

Эти программы бывают нескольких типов

1. Программы первого рода - полностью резидентные, т.е. 
2. Второго рода - частично резидентные
3. Третьего рода - Резидентыне по условию

Как правило различают два режима работы ОС - режим супервизора и режим задач

режим супервизора - Обеспечивает возмоность выполнения любых ашинных команд, как привилигированных так и не привилигированных.
Режим задачи - только не привилигированных. 
Таким образом обеспечивается первый уровень защиты от 

Переход из режима в режим, выполняется спец командами посредсвом внутренних супервизорных прерываний.

# Планировщики

Это программы отвечающие за распределения времени процессора конкретно процессом.
Различают три уровня планировщика

1. Дсипетчеры
2. Планировщики первого уровня
3. Планировщики второго уровня - долговременные

Основная функция всех планоровщиков - обеспечить предоставление процессора по очереди, всем существующим в системе активным процессам, с учетом их приоритетов и текущего состояния системы. Для этого используются различные алгоритмы планирования. Наиболее рспространенных алгоритмом планирования, является круговой циклический алгоритм RR (RoundRabit) В этом алгоритме 
всем процессам, выделяется определенный квант процессорного времени, по истечению которого происходит передача управления следующему ожидающему процессу. 

Для используются приоритетные агоритмы - примеры
* SJF (кратчайшее задание выполняется первым). 
* SRT - Наибольшим приоритетом обладает задание у которого наибольшее...

Классическим примером динамического алгоритма KORBATO - в этом алгоритме поддерживается несколько приоритетных уровней. На каждом таком уровне реализованно дисциплина обслуживания - очередь (FIFO).

После выделения очередного кванта времени, процес переводится на уровень с более низким приоритетом.
Обеспечивается равномерное распределение всех актывных задач.
Кол-во уровней планирования, в каждой системе может быть различным и зависить от вычислительного процесса и типа ВС.

# Управление процессами и ресурсами системы

Обычно под процессом - совокупность програмы и данных которые обрабатываются на некотором процессоре.
В ряде систем используется термин задача - синоним процессам.

Под ресурсом понимается любой обьект который распределен для использования. Различат
* CR - потребляемые ресурсы
    * Отноятся изменяемы процедуры и данные, а также различне сигналы и сообщения
* SR - повтороно используемые - возврощаются в неизменном виде
    * Все аппаратные ресурсы, а также не изменяемые данные и процедуры


Под управлениями ресурсами решаются задачи

1. Изменение статуса процесса
2. Синхронизация двух и более процессов
3. Решения проблемы взаимной блокировок

Изменение статуса процесса - выполяется при наступлении некоторого события которые отслеживаются Эти изменения отслеживаются.

Двоичный сеофор это

для которого определены две операции

С каждым таким семофором связана критичиская секция в программе процессора

Семофор позволяет только одному процессу войти в крит секцию
Только в крит секции процессору позволяется выполнять действия над крит ресурсами
Критическим называется ресурс, которым одновременно может владеть только один процесс


Монитор Хаара представляет собой набор структур и набор данных которые также регулируют 

Семофоры могут быть реализованны как програмно так и аппаратно, а мониторы Хаара только програмно

#### Проблемы при использоваии 2 и > процессов - 

CR
чать процессов являются их потребителями. 

Для согласования использются так называемые общие семофоры. Над общими семофорами выделены две операции

P(x) = {
    x-1, если x >= 0
    x, если x = n
};

V(x) = {
    x+1, если x < n
    x, если x = n
};

P, V - операции

Общие семофоры имеют простой смысл

фото1

#### Проблема взаимных блокировок

фото2

* Взаимная блокировка
* Тупик 
* Тупиковые состояния
* 

Такое сотояние является не допустимым т.к. процессы не произвоят никакой полезной работы и в тоже время удерживают ресурсы. Система не может выйти из этого стостояния без внешенего воздействия. Поэтому используется "Устранение тупиков"

### Теорема о тупике

Система находится в тупике тогда и только тогда когда двухдольный граф в системе содержит хотябы один цикл.

### Устранение тупиков

* Статические
    * Анализ 
* Динамические 
    * Предотвращение 
        * Метод упорядочевания классов - в этом методе, процессору разрешается использовать i ресурс, только если он владеет i-1. i - класс ресурса. Очень 
        * Алгоритм Банкира  - в этом алгоритме все ресурсы делятся на 3 ресурса. Безопасные, опасные, и тупиковые. Системе не разрешается попадать в опасные состояния т.к. опасным считается состояния из которого возможно перейти в тупиковое состоние, а безопасное - переход только в друое безопасное или безопасное. 
    * Обнаружение 
        * с ручным выходом
        * с мин. ценой выхода

СЦВМ - спец. ЭВМ

Запрос процесса какого-то ресурса или освобождение ресурса


## 

Необходимость управления основной памятью 

Эта проблема усугубляется в условиях мульти программирования, когда необходимо хранить в оперативной памяти хранить коды програм и данные для мноих процессах. Простейшим решением является свопинг, 

загружается в тоже место оперативной памяти 

В любом случае ОС должна контролировать каждый момент времени представляет собой пеструю картину 

Обычно все свободные участки памяти перечисляются в списке которые упорядочены по начальному 

При поступлении запроса, менеджер оперативной памяти просмативает этот список и выделяет процессу свободный участок по одному из 

1. "Первый подходящий" - когда из списка выбирается первый подходящий
2. "Следующий подходящий" - который отличается от предыдущего только тем что адрес выбранного участка запоминается в качестве начальной точки прсмотра при следующем таком же обращении
3. "Наиболее подходящий" - когда выирается наименьший участок  
4. "Наименее подходящий" - когда выбирается наибольший участок 
5. Быстрый подходящий - в котором поддерживается несколько списков для некоторых наиболее часто запрашиваемых размеров 

Применение того или иного алгорима опредяется ПО и решаемыми задачами.

## Управление вирт памятью

Размер ОЗУ современных не мозволяет выполнять большие программы которые требуют выполнение широкого...
Для решения этой проблемы вводится понятия виртуального адресного пространства поддерживаемого виртуальной памятью.

Ральное выполнение программы выполнятеся только с использованием оперативной мамяти. Поэтому в ОС должен существовать менеджер вирт памяти, который отображает вит адреса на реальной маяти.

В настоящее время широко применима страничная и 

### 

Все пространсто вирт адресов разделено части называемых страницами. Размер страниц одинаковый, варьируется от 512б до 64к. Соответствующие разделы наз блоками. Все страницы хранятся во внешней памяти. Но в каждый момент времени часть траниц присутствует в РАМ в виде страничных блоков. Отображение вирт страниц на страничные блоки осуществляется с помощью так называемой таблицы страниц.

При обращении в программе к некоторой страницы спец диспетчер памяти определяет наличие или отсутствие этой страницы в пямяти. Если страница присуттвует то формируется реальный адрес в РАМ по которой производятся реальные действия. Если страница отсуттвует то с помощью таблицы страниц находится требуемая страница во внешней памяти, которая и загружается в РАМ. Для этого перед загрузкой требуется освободить место в РАМ из одного из страничных блоков старая страница должна быть вытеснена во внешнюю память. При выталкивании используются различне алгоритмы.

NRU - выталкивается последныы не используемая страница
FIFO - выталкивается самая старая страница
LRU - выталкивается не использующая 
NFU - 


### Сегментная организация 

В отлиции от - вирт и пространство РАМ разбивается на сегменты которые могут иметь различный размер.
На ряду с 
например при замене мигментов внешней памяти происходит принудительная дефрагментация 
В сис - размер очень большой поэтому 

## Файловые системы 

Потребность в долговременого хранения больших обьемов не может быть удовлетворена только за счет вирт памяти. Для такго понятия  - файл.
Под файлом понимается совокупность сгруппированнх под общим именем для хранения и использования.

Соворупность определенно организованных файлов а также стредство управления этой называется файловой системой.

Конечного пользователя интересует только удобство и 
Внутренее устройство, размещение на внешнем насителе, как правило скрыто 
ФС поддеживает логичесвую и физическу ю

### логическая 

логичесвую - принимается во внимание при прграммировании приложений и понимается и способ доступа к этим донным

Различают 
* Последовательную
* Индексно Последовательную
* Прямую
* 

Способы доступа - базисные и с очередями

базисные - наиболее быстрые и используется для обмена большими порциями информации между внешними ОП памяти однако она не требует 

с очередями - в максимальной степени освобождает программиста от обязанностей, возлагая на ОСь.


### Физическая организация 

Физическая организация  - отражает 

Единица хранения информации на внешнем устройстве - запись

Различают фиксированная, переменная и 

Причем блоки могут занимать непрерывную запись в памяти или представлять собой связанные списки.
связанные списки - более эффективно используется память, но сложнее управлять

### Структура ФС

Большинство имеют древовидную и иерархическую.
Главная особенность - уникальными путями

Для построения такого дерева вводится понятие файл-каталог. файл-каталог - хранит информацию характеристики включенного в этот каталог файла.

Поддержка структур данных которые обеспечивают функционирвания древовидную структуру является важнейшей задачай ФС.

## Оболочки Операционных систем 

являются важнейшую связь, связанные с координацией всей ОСь.

Функции поддержки пользвателя. Во всех - ялвяется командная строка которая содержит запросы пользователя выполнение определенных действуи и ответ оболочки. Взаимодействие ОС осуществляется с помощью так называемых системных вызовов. 
Для реализации сложныз запросов со стороны приложений, в оболочку включаются доп средства для программирования ветвлящихся алгоритмов. 
Эти средства - т.н. внутрение команды оболочки представяют внетрений язык програмирования - скрипты, к кторым можно обращться как внешне

Другим средством является графический интерфейс - он реализуется отдельной граф оболочкой. Более удобной для пользователя но менее удобно 

### Средства генерации ОСь

Любая ОС - дистрибтивоов - модули - Из этих частей собираются все части ОСи которые должна функционировать в любой платформе с определеной. Процесс такой сборки называется генерацией ОС. 

В процессе генерации кроме генерации оборудования и его оборудования устанавливается параметры системы, а также различные ограничения, например макс число пользователей, макс и т.д.

Генерация может осуществлятся в не сколько этапов. Иногда совмещается с загруской ОСи. Задача генерации близки задачи резервного копирования или сбоев системю

# UNIX

## История создания  

Multics

1965г AT&T совместно с MIT

Unick - только на одной 

1970 - рождение юникс


## Состав ОС линукс
